<html>
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="stylesheet" href="{{ url_for('static', filename='layout.css')}}">
        <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
        <title>WebAPI Art App</title>
    </head>
    <body>
        <h1>WebAPI ART APP</h1>
        <h3>ğŸ¦ŠWelcome to small art museumğŸ¿</h3>
        <div class="btn-gp">
            <input type="button" value="All" onclick="test_ajax('all')">
            <input type="button" value="japan" onclick="test_ajax('japan')">
            <input type="button" value="France" onclick="test_ajax('france')">
            <input type="button" value="America" onclick="test_ajax('america')">
            <input type="button" value="Italy" onclick="test_ajax('italy')">
            <input type="button" value="Spain" onclick="test_ajax('spain')">
        </div>
        <div class="output">
            {% for i in range( name | length) %}
                <div class="output_card">
                    <h3 id="p_name{{i}}" value="{{ name[i] }}">{{ name[i] }}</h3>
                    <p id="p_exp{{i}}">{{ explain[i] }}</p>
                    <p id="country{{i}}" class="country_delete"></p>
                    <button onclick="popup('{{country[i]}}','{{name[i]}}')">ä½œè€…ã‚’è¦‹ã‚‹</i></button>
                </div>

            {% endfor %}
            <!-- <div class="output_author", id="result_author">
                <h3>ä½œè€…å</h3>
                <p>ã‚«ãƒŠ</p>
                <p>èª•ç”Ÿæ—¥</p>
                <p>èª¬æ˜æ–‡</p>
            </div> -->
        </div>
        <div id="popup">
            <div id="content">
                <h3 id="author">ä½œè€…å</h3>

                <label>è‹±èªè¡¨è¨˜ï¼š</label>
                <p id="a_kana">èª­ã¿ä»®åï¼š</p>

                <label>èª•ç”Ÿæ—¥ï¼š</label>
                <p id="a_birthday">èª•ç”Ÿæ—¥ï¼š</p>

                <label>ç”Ÿæ¶¯ï¼š</label>
                <p id="insen">ç”Ÿæ¶¯ï¼š</p>
                <button id="close">é–‰ã˜ã‚‹</button>
            </div>
        </div>
    </body>
    <script type="text/javascript">
        function test_ajax(country){
            // var value = document.getElementById(country).value;
            $.ajax({
                type:"GET",
                url:"/test_ajax/",
                data:{
                    value:country,
                },
            })
            .done(function(data, text, jq){
                for (i=0; i<(data["product"][0].length); i++){
                    for (j=0; j<data["product"].length; j++){
                        if (j == 0){
                            write_3 = data["product"][j][i];
                            console.log(write_3)
                            $('#p_name'+i).html("<h3>"+write_3+"</h3>");
                        }else if(j == 2){
                            write_p = data["product"][j][i];
                            console.log(write_p)
                            $('#p_exp'+i).html("<p>"+write_p+"</p>");
                        }
                        country = data['author'][4][i];
                        console.log(country)
                        $('#country'+i).html("<p>"+country+"</p>");

                    }
                    // return jsonify({"product":[p_name, p_kana, p_exp], "author":[a_name, a_kana, a_birth, a_exp, a_country]})
                }
            });
        }
        function popup(country, name){
            $.ajax({
                type:"GET",
                url:"/popup_ajax/",
                data:{
                    name:name,
                    country:country,
                },
            })
            .done(function(data, text, jq){
                $('#popup').addClass('show').fadeIn();
                author = data['author'][0];
                console.log(author)
                $('#author').html("<h3>"+author+"</h3>");

                kana = data['author'][1];
                console.log(kana)
                $('#a_kana').html("<p>"+kana+"</p>");

                birth = data['author'][2];
                console.log(birth)
                $('#a_birthday').html("<p>"+birth+"</p>");

                insen = data['author'][3];
                console.log(insen)
                $('#insen').html("<p>"+insen+"</p>");
                //     // return jsonify({"author":[a_name, a_kana, a_birth, a_exp]})

            });
        }
        $('#close').on('click', function(){
            $('#popup').fadeOut();
        })



    </script>
</html>